<!-- Chat Header -->
<div class="p-4 border-b bg-gray-50 flex justify-between items-center">
    <h2 class="font-bold text-lg">{{ conversation.name }}</h2>
</div>

<!-- Messages -->
<div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4">
    {% for msg in messages %}
        {% if msg.sender == 'user' %}
            <div class="flex justify-end">
                <div class="bg-blue-500 text-white p-3 rounded-lg max-w-xl">
                    {{ msg.content }}
                </div>
            </div>
        {% else %}
            <div class="flex justify-start">
                <div class="bg-gray-200 text-gray-800 p-3 rounded-lg max-w-xl">
                    <div class="text-xs font-bold text-gray-500 mb-1">{{ msg.sender }}</div>
                    {{ msg.content }}
                </div>
            </div>
        {% endif %}
    {% endfor %}
</div>

<!-- Input Area -->
<div class="p-4 border-t">
    <form hx-post="/message" 
          hx-target="#chat-messages" 
          hx-swap="beforeend"
          hx-on::after-request="this.reset()"
          class="flex space-x-2">
        <input type="hidden" name="conversation_id" value="{{ conversation.id }}">
        <input type="text" name="content" placeholder="Type a message..." class="flex-1 border p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" autocomplete="off" required>
        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Send</button>
    </form>
</div>

<script>
    // Scroll to bottom on load
    var chatMsgs = document.getElementById("chat-messages");
    chatMsgs.scrollTop = chatMsgs.scrollHeight;
</script>

